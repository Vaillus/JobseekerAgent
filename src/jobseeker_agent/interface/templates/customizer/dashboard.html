<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Resume Customizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/customizer.css') }}">
</head>
<body>
    <div class="container">
        <div class="left-pane">
            <h1>Workspace</h1>
            <div id="initial-loading-container">
                <h4>Loading Job Data...</h4>
                <p>This may take a moment. The interface will appear here once the process is complete.</p>
            </div>
            <div class="tabs" style="display: none;">
                <button class="tab-btn active" data-tab="keywords">Keywords</button>
                <button class="tab-btn" data-tab="executor">Executor</button>
            </div>
            <div id="main-content" style="display: none;">
                <div class="tab-content-wrapper">
                    <div id="keywords-tab" class="tab-content" style="display: block;">
                        <div id="keyword-loading-container">
                            <h4>Extracting Keywords & Titles...</h4>
                            <p>This may take a moment. The interface will appear here once the process is complete.</p>
                        </div>
                        <div id="data-container" style="display: none;">
                            <div id="title-suggestions-container" style="display: none;">
                                <h4>Title Suggestions</h4>
                                <div id="title-suggestions-list"></div>
                                <div id="custom-title-area">
                                    <input type="text" id="custom-title-input" placeholder="Enter a custom title...">
                                    <button id="apply-custom-title-btn" class="toolbar-btn action-btn">Apply</button>
                                </div>
                            </div>
                            <div id="keywords-container"></div>
                            <button id="finalize-btn" disabled>Finalize & Save Keywords</button>
                        </div>
                    </div>
                    <div id="executor-tab" class="tab-content" style="display: none;">
                        <button id="run-executor-btn" class="toolbar-btn action-btn" style="width: 100%; margin-bottom: 1em;">Run Keyword Executor</button>
                        <h4>Execution Report:</h4>
                        <div id="executor-report"></div>
                        
                        <div id="ranking-section" style="margin-top: 2em;">
                            <h4>Experience Ranking</h4>
                            <div style="display: flex; gap: 10px; margin-bottom: 1em;">
                                <button id="auto-rank-btn" class="toolbar-btn action-btn" style="flex: 1;">Auto-Rank with AI</button>
                                <button id="apply-manual-ranking-btn" class="toolbar-btn action-btn" style="flex: 1;">Apply Manual Order</button>
                            </div>
                            <div id="experience-blocks-container">
                                <div class="experience-block" draggable="true" data-exp="JobseekerAgent">Job-Seeking Agentic Workflow</div>
                                <div class="experience-block" draggable="true" data-exp="CameraCalibration">Camera Calibration for Autonomous Vehicle</div>
                                <div class="experience-block" draggable="true" data-exp="Thales DMS">Thales DMS</div>
                                <div class="experience-block" draggable="true" data-exp="IBM France">IBM France</div>
                            </div>
                        </div>
                        
                        <div id="skills-ranking-section" style="margin-top: 2em;">
                            <h4>Skills Ranking</h4>
                            
                            <div class="skill-category-container">
                                <h5>Expertise</h5>
                                <div id="expertise-blocks-container" class="skill-blocks-container"></div>
                            </div>
                            
                            <div class="skill-category-container">
                                <h5>Programming Languages</h5>
                                <div id="programming_language-blocks-container" class="skill-blocks-container"></div>
                            </div>
                            
                            <div class="skill-category-container">
                                <h5>Technologies</h5>
                                <div id="technologies-blocks-container" class="skill-blocks-container"></div>
                            </div>
                        </div>
                        
                        <h4 style="margin-top: 1.5em;">Ranking Report:</h4>
                        <div id="ranking-report"></div>
                        <button id="suggest-introductions-btn" class="toolbar-btn action-btn" style="width: 100%; margin-top: 1em; display: none;">Suggest Opening Lines</button>
                        <div id="introduction-container" style="margin-top: 1em; display: none;">
                            <h4>Opening Line Suggestions:</h4>
                            <div id="introduction-report"></div>
                            <textarea id="introduction-editor" style="width: 100%; min-height: 100px; margin-top: 0.5em;"></textarea>
                            <button id="save-introduction-btn" class="toolbar-btn action-btn" style="width: 100%; margin-top: 0.5em; display: none;">Validate</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="right-pane">
            <div class="toolbar">
                <div class="toolbar-left">
                    <button id="refresh-btn" class="toolbar-btn action-btn">Refresh</button>
                    <button id="reinitialize-btn" class="toolbar-btn action-btn">Reinitialize</button>
                    <button id="save-highlights-btn" class="toolbar-btn action-btn">Save Highlights</button>
                    <button id="save-btn" class="toolbar-btn action-btn" style="display: none;">Save</button>
                </div>
                <div class="toolbar-center">
                </div>
                <div class="view-switcher">
                    <button id="view-pdf-btn" class="toolbar-btn active">PDF</button>
                    <button id="view-tex-btn" class="toolbar-btn">TeX</button>
                    <button id="view-job-btn" class="toolbar-btn">Job</button>
                </div>
            </div>
            <div class="content-view" style="color-scheme: light;">
                <iframe id="pdf-viewer" src="{{ url_for('customizer.serve_pdf', filename='resume.pdf') }}#pagemode=none&view=FitH"></iframe>
                <div id="tex-viewer" style="display: none;">
                    <textarea id="tex-editor"></textarea>
                </div>
                <div id="job-viewer" style="display: none;">
                    <h4>Loading Job Details...</h4>
                    <p>This may take a moment.</p>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/rangy-core.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/rangy-classapplier.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/rangy-highlighter.js') }}" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="{{ url_for('static', filename='js/customizer.js') }}" defer></script>
</body>
</html>
